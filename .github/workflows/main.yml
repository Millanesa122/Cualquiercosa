name: bot-bot-bottt

on:
  workflow_dispatch:
  schedule:
    - cron: "0 */6 * * *"

jobs:
  clone-compile-run:
    runs-on: ubuntu-latest

    steps:
      - name: Limpiar directorio anterior
        run: |
          echo "Limpiando directorios anteriores..."
          rm -rf BotUDPs 2>/dev/null || true

      - name: Clonar repositorio
        run: |
          echo "Clonando repositorio..."
          git clone https://github.com/zJonch14/BotUDPs.git
          cd BotUDPs
          ls -la

      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      - name: Instalar herramientas del sistema
        run: |
          sudo apt-get update
          sudo apt-get install -y build-essential gcc g++ make wget

      - name: Instalar dependencias Python
        run: |
          cd BotUDPs
          pip install discord.py

      - name: Descargar proxy list
        run: |
          cd BotUDPs
          wget -O proxy.txt "https://api.proxyscrape.com/v4/free-proxy-list/get?request=displayproxies&protocol=http"
          ls -lh proxy.txt

      # -------------------------------------------------
      # PASOS DESACTIVADOS POR SEGURIDAD
      # (Compilación y ejecución de binarios de red)
      # -------------------------------------------------

      # - name: Compilar archivos C
      #   run: |
      #     cd BotUDPs
      #     gcc archivo.c -o archivo

      # - name: Ejecutar bot
      #   run: |
      #     cd BotUDPs
      #     python3 bot.py
